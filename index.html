<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Pƒ±leySitey≈üƒ±n 6</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Saira:wght@300;500;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap'); /* Piksel font */

        :root {
            --bg-dark: #121212;
            --focus-blue: #2d6ff7;
            --accent-gold: #f1c40f;
            --danger: #e74c3c;
        }

        body {
            margin: 0; padding: 0; background-color: black; color: white;
            font-family: 'Saira', sans-serif; overflow: hidden; height: 100vh; user-select: none;
        }

        /* Tƒ∞TRE≈ûƒ∞M EFEKTƒ∞ (OSURUK ƒ∞√áƒ∞N) */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        .shake-screen { animation: shake 0.5s; animation-iteration-count: infinite; }

        /* ARKA PLAN */
        #bg-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: linear-gradient(135deg, #1a1a1a 0%, #000000 100%);
            transition: background 0.5s ease;
        }

        /* √úST BAR */
        .top-bar {
            display: flex; justify-content: space-between; padding: 25px 50px; align-items: center;
            background: rgba(0,0,0,0.5); backdrop-filter: blur(5px);
        }
        .tabs { display: flex; gap: 30px; font-size: 1.2rem; font-weight: bold; }
        .tab { color: #666; transition: 0.3s; padding: 5px 10px; border-radius: 20px; }
        .tab.active { color: white; background: rgba(255,255,255,0.1); }
        
        .status-area { display: flex; align-items: center; gap: 20px; }
        .wifi-badge { padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; font-weight: bold; }
        .wifi-off { background: #333; color: #888; }
        .wifi-ok { background: #2ecc71; color: black; }
        .wifi-hacker { background: #00ff00; color: black; box-shadow: 0 0 10px #0f0; }

        .avatar {
            width: 45px; height: 45px; border-radius: 50%;
            background: url('https://api.dicebear.com/7.x/avataaars/svg?seed=Felix') center/cover;
            border: 2px solid white;
        }

        /* ANA ƒ∞√áERƒ∞K */
        .content-scroll {
            display: flex; gap: 30px; padding-left: 60px; margin-top: 40px;
            transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .card {
            min-width: 180px; height: 250px; background: #222; border-radius: 15px;
            display: flex; flex-direction: column; align-items: center; justify-content: flex-end;
            padding-bottom: 20px; position: relative; transition: all 0.2s;
            border: 4px solid transparent; overflow: hidden;
        }
        .card-img {
            position: absolute; top: 0; left: 0; width: 100%; height: 70%;
            background-size: cover; background-position: center; filter: grayscale(50%);
        }
        .card i { font-size: 4rem; margin-bottom: 40px; color: #555; z-index: 1; }
        .card span { font-size: 1.1rem; font-weight: bold; z-index: 2; text-shadow: 0 2px 5px black; }

        .card.selected {
            transform: scale(1.1); border-color: white; z-index: 10; box-shadow: 0 10px 30px rgba(0,0,0,0.8);
        }
        .card.selected .card-img { filter: grayscale(0%); }

        /* HERO Bƒ∞LGƒ∞ */
        .hero-section {
            position: absolute; bottom: 50px; left: 60px; max-width: 600px;
        }
        .hero-title { font-size: 3.5rem; margin: 0; font-weight: 800; letter-spacing: -2px; }
        .hero-desc { font-size: 1.2rem; color: #aaa; margin-top: 10px; }

        /* CD Gƒ∞Rƒ∞≈û */
        .cd-prompt {
            position: fixed; bottom: 20px; right: 30px; display: flex; gap: 10px; font-size: 0.9rem; color: #ddd;
        }
        .key-box { border: 1px solid #fff; padding: 2px 8px; border-radius: 4px; font-weight: bold; }

        /* MODALLAR (UYGULAMALAR & OYUNLAR) */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.96); z-index: 999; display: none;
            flex-direction: column; align-items: center; justify-content: center;
        }

        /* NETFƒ∞Lƒ∞Z */
        .netfiliz-container { text-align: center; }
        .gihun-face {
            width: 300px; height: 300px; background: #333; margin: 0 auto 20px;
            background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRz-Mv9iWv6u4qH2pW7e1c2r9k8o5z_x5u_3w&s'); /* Placeholder for face */
            background-size: cover; border: 5px solid #e50914;
        }
        .quote-box { font-size: 2rem; color: #e50914; font-family: serif; font-style: italic; }

        /* SIPATIFAY */
        .spoti-list { width: 400px; background: #121212; border: 1px solid #1db954; padding: 20px; }
        .spoti-item { padding: 15px; border-bottom: 1px solid #333; color: #b3b3b3; display: flex; justify-content: space-between; }
        .spoti-item.active { background: #333; color: #1db954; font-weight: bold; }
        .fart-text {
            position: fixed; font-size: 10rem; color: #8B4513; font-weight: bold; 
            text-shadow: 5px 5px 0px #fff; display: none; transform: rotate(-20deg);
        }

        /* YUTUB */
        .yutub-frame { width: 600px; height: 400px; background: white; color: black; padding: 20px; position: relative; }
        .yutub-video { width: 100%; height: 250px; background: black; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .finance-guy { font-size: 5rem; }
        .marquee { position: absolute; bottom: 0; left: 0; white-space: nowrap; overflow: hidden; background: red; color: white; width: 100%; }

        /* WEB BROWSER */
        .browser-window { width: 80%; height: 80%; background: white; border-radius: 5px; display: flex; flex-direction: column; }
        .url-bar { background: #eee; padding: 10px; border-bottom: 1px solid #ccc; color: black; font-family: monospace; }
        .web-content { flex: 1; padding: 20px; color: black; font-family: 'Times New Roman', serif; overflow-y: auto; }
        .web-link { color: blue; text-decoration: underline; margin-bottom: 10px; display: block; cursor: pointer; }
        .web-link.hover { background: yellow; }

        /* GAME CANVAS */
        canvas { background: #333; border: 2px solid white; image-rendering: pixelated; }

        /* HATA / Bƒ∞LDƒ∞Rƒ∞M */
        .toast {
            position: fixed; top: 20px; right: 20px; background: #333; color: white; padding: 15px 30px;
            border-left: 5px solid var(--accent-gold); font-size: 1.2rem; display: none;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5); z-index: 2000;
        }

    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <div id="bg-layer"></div>
    <div class="toast" id="toast-msg"></div>

    <!-- UI -->
    <div class="top-bar">
        <div class="tabs">
            <div class="tab active" id="tab-games">Oyunlar</div>
            <div class="tab" id="tab-media">Medya</div>
            <div class="tab" id="tab-web">ƒ∞nternet</div>
        </div>
        <div class="status-area">
            <span class="wifi-badge wifi-off" id="wifi-status">Baƒülƒ± Deƒüil</span>
            <span id="clock">19:05</span>
            <div class="avatar" id="profile-btn"></div>
        </div>
    </div>

    <!-- MAIN MENU SCROLL -->
    <div style="width: 100%; overflow: hidden; height: 400px;">
        <div class="content-scroll" id="card-container">
            <!-- JS generates cards here -->
        </div>
    </div>

    <!-- HERO TEXT -->
    <div class="hero-section">
        <h1 class="hero-title" id="hero-title">FIFA 77</h1>
        <p class="hero-desc" id="hero-desc">Grafikler kasƒ±yor.</p>
    </div>

    <div class="cd-prompt">
        <span class="key-box">C</span> CD Gir
        <span class="key-box">ENTER</span> Se√ß
        <span class="key-box">ESC</span> Geri
    </div>

    <!-- === UYGULAMA PENCERELERƒ∞ === -->

    <!-- NETFƒ∞Lƒ∞Z -->
    <div class="overlay" id="app-netfiliz">
        <div class="netfiliz-container">
            <h1 style="color: #e50914; margin-bottom: 30px;">NETFƒ∞Lƒ∞Z</h1>
            <div class="gihun-face" style="display:flex; justify-content:center; align-items:center; color:white; font-size:3rem;">ü¶ë</div>
            <div class="quote-box">"Biz insan deƒüiliz...<br>Biz atƒ±z!"</div>
            <p style="color: #666; margin-top: 20px;">[ESC] √áƒ±kƒ±≈ü</p>
        </div>
    </div>

    <!-- SIPATIFAY -->
    <div class="overlay" id="app-spoti">
        <h2 style="color: #1db954; margin-bottom: 20px;">SIPATIFAY</h2>
        <div class="spoti-list" id="spoti-list-el">
            <div class="spoti-item active">1. Damardan Arabesk</div>
            <div class="spoti-item">2. Dƒ±≈ükƒ±larken Dinlenecekler üí©</div>
            <div class="spoti-item">3. Uyku Modu</div>
        </div>
        <div class="fart-text" id="fart-fx">ZAAAART!</div>
    </div>

    <!-- YUTUB -->
    <div class="overlay" id="app-yutub">
        <div class="yutub-frame">
            <div class="yutub-video">
                <div style="text-align:center;">
                    <div class="finance-guy">üë®‚Äçüíº</div>
                    <div id="finance-talk">Dolar haftaya 50 TL!</div>
                </div>
                <div class="marquee"><span id="yutub-marquee">YTD YTD YTD YTD DOLAR ALIN ALTIN SATIN COIN BATTI YTD YTD...</span></div>
            </div>
            <h3>Piyasa Analizi (√áok Ciddi)</h3>
            <p>1.2M G√∂r√ºnt√ºlenme ‚Ä¢ 1 saat √∂nce</p>
            <p style="color: #666; font-size: 0.8rem; margin-top: 20px;">[ENTER] Video Deƒüi≈ütir - [ESC] √áƒ±kƒ±≈ü</p>
        </div>
    </div>

    <!-- TARAYICI -->
    <div class="overlay" id="app-browser">
        <div class="browser-window">
            <div class="url-bar" id="browser-url">http://www.google.com.tr</div>
            <div class="web-content" id="browser-content">
                <h1>Arama Motoru</h1>
                <div class="web-link hover">www.bedava-ram-indir.com</div>
                <div class="web-link">www.toptan-simit-borsasi.net</div>
                <div class="web-link">www.kellik-ilaci-garantili.org</div>
                <div class="web-link">www.facebook.com/dayilar</div>
            </div>
        </div>
        <p style="color: white; margin-top: 10px;">[OK TU≈ûLARI] Gezin - [ENTER] Git - [ESC] Kapat</p>
    </div>

    <!-- WIFI MEN√úS√ú -->
    <div class="overlay" id="menu-wifi">
        <div class="spoti-list" style="border-color: white;">
            <h3>Aƒû SE√áƒ∞Mƒ∞</h3>
            <div class="spoti-item active" id="wifi-opt-0">Evimin WiFi (TTNET) <span style="color:red; font-size:0.7rem;">√á√ñP</span></div>
            <div class="spoti-item" id="wifi-opt-1">Kom≈üunun WiFi <span style="color:yellow; font-size:0.7rem;">ƒ∞DARE EDER</span></div>
            <div class="spoti-item" id="wifi-opt-2">Hacker WiFi (≈ûifreli) <span style="color:#0f0; font-size:0.7rem;">GOD MODE</span></div>
        </div>
        <div id="wifi-pass-input" style="display:none; margin-top: 10px;">
            <input type="text" id="pass-field" placeholder="≈ûifre Gir" style="padding: 10px; font-size: 1.2rem;">
        </div>
    </div>

    <!-- CD Gƒ∞Rƒ∞≈û -->
    <div class="overlay" id="menu-cd">
        <div style="background: #333; padding: 40px; border: 2px solid white;">
            <h2>CD KEY Gƒ∞R</h2>
            <input type="text" id="cd-field" style="font-size: 2rem; width: 200px; text-transform: uppercase;">
            <p>ƒ∞pucu: GS1905, PARA</p>
        </div>
    </div>

    <!-- OYUN: FIFA 77 -->
    <div class="overlay" id="game-fifa">
        <div id="fifa-menu" style="text-align:center;">
            <h1 style="font-family: 'Press Start 2P'; color: yellow;">FIFA 77</h1>
            <p style="color: #aaa;">Low Quality Edition</p>
            <div class="spoti-list" style="margin: 0 auto; width: 300px;">
                <div class="spoti-item active">MA√áA BA≈ûLA</div>
                <div class="spoti-item">KARƒ∞YER (ICARDI)</div>
                <div class="spoti-item">≈ûƒ∞KE AYARLARI: <span id="sike-val">KAPALI</span></div>
            </div>
        </div>
        <canvas id="fifa-canvas" width="600" height="400" style="display:none;"></canvas>
        <div id="icardi-screen" style="display:none; text-align:center;">
            <h1>TATƒ∞L MODU</h1>
            <div style="font-size: 5rem;">üèñÔ∏èüçπ</div>
            <p>"Wanda ile barƒ±≈üƒ±yorum, ma√ßa gelemem."</p>
            <div style="width: 300px; height: 20px; background: #333; margin: 20px auto; border: 1px solid white;">
                <div style="width: 20%; height: 100%; background: orange;"></div>
            </div>
            <p>Tatil ƒ∞lerlemesi: %20</p>
        </div>
    </div>

    <!-- OYUN: GTA -->
    <div class="overlay" id="game-gta">
        <h2 style="font-family: 'Press Start 2P'; color: white;">GTA: BAƒûCILAR</h2>
        <canvas id="gta-canvas" width="400" height="500"></canvas>
        <p>Y√∂n Tu≈ülarƒ± ile Ka√ß. Kƒ±rmƒ±zƒ± mermilere dikkat!</p>
    </div>

    <script>
        /* --- VERƒ∞LER --- */
        const apps = [
            { id: 'store', cat: 'games', title: 'Maƒüaza', icon: 'fa-shopping-cart', desc: 'Bedava oyun yok.' },
            { id: 'fifa', cat: 'games', title: 'FIFA 77', icon: 'fa-futbol', desc: 'Low Graphics Edition. ≈ûike Dahil.', locked: true },
            { id: 'gta', cat: 'games', title: 'GTA Baƒücƒ±lar', icon: 'fa-car-side', desc: 'Rastgele ate≈ü ediliyor.' },
            { id: 'netfiliz', cat: 'media', title: 'Netfiliz', icon: 'fa-play', desc: 'S√ºkutu Geym yayƒ±nda.' },
            { id: 'spoti', cat: 'media', title: 'Sƒ±patifay', icon: 'fa-spotify', desc: 'Zor anlar i√ßin m√ºzikler.' },
            { id: 'yutub', cat: 'media', title: 'YuTub', icon: 'fa-youtube', desc: 'Yatƒ±rƒ±m tavsiyesi deƒüildir.' },
            { id: 'browser', cat: 'web', title: 'Tarayƒ±cƒ±', icon: 'fa-globe', desc: 'Sa√ßma sapan siteler.' },
            { id: 'wifi', cat: 'settings', title: 'WiFi Ayarlarƒ±', icon: 'fa-wifi', desc: 'Kom≈üudan √ßal.' },
            { id: 'profile', cat: 'settings', title: 'Profil', icon: 'fa-user', desc: 'Adƒ±n: Gariban Gamer' }
        ];

        /* --- STATE --- */
        let state = {
            tab: 'games', // games, media, web
            idx: 0,
            screen: 'home', // home, app, game, modal
            wifi: 'none', // none, bad, ok, hacker
            sike: false,
            coins: 0
        };

        // UI Refs
        const container = document.getElementById('card-container');
        const heroTitle = document.getElementById('hero-title');
        const heroDesc = document.getElementById('hero-desc');
        const bg = document.getElementById('bg-layer');

        /* --- INIT --- */
        function renderMenu() {
            container.innerHTML = '';
            // Filter by tab
            let currentItems = [];
            if(state.tab === 'games') currentItems = apps.filter(x => x.cat === 'games');
            else if(state.tab === 'media') currentItems = apps.filter(x => x.cat === 'media');
            else if(state.tab === 'web') currentItems = apps.filter(x => x.cat === 'web' || x.cat === 'settings');

            currentItems.forEach((item, i) => {
                let div = document.createElement('div');
                div.className = `card ${i === state.idx ? 'selected' : ''}`;
                div.innerHTML = `<i class="fas ${item.icon}"></i><span>${item.title}</span>`;
                if(item.locked && state.wifi !== 'hacker') div.style.opacity = '0.5';
                container.appendChild(div);
            });

            // Update Text
            let activeItem = currentItems[state.idx];
            if(activeItem) {
                heroTitle.innerText = activeItem.title;
                heroDesc.innerText = activeItem.desc + (activeItem.locked && state.wifi !== 'hacker' ? " [Kƒ∞Lƒ∞TLƒ∞ - CD LAZIM]" : "");
                // Renk deƒüi≈üimi
                let colors = {'games': '#2d3436', 'media': '#c0392b', 'web': '#2980b9'};
                bg.style.background = `linear-gradient(135deg, ${colors[state.tab]} 0%, #000 100%)`;
            }
            
            // Tab Highlights
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            if(state.tab === 'games') document.getElementById('tab-games').classList.add('active');
            if(state.tab === 'media') document.getElementById('tab-media').classList.add('active');
            if(state.tab === 'web') document.getElementById('tab-web').classList.add('active');
        }

        /* --- INPUT HANDLING --- */
        document.addEventListener('keydown', (e) => {
            if (state.screen === 'home') handleHomeInput(e);
            else if (state.screen === 'app') handleAppInput(e);
            else if (state.screen === 'modal') handleModalInput(e);
        });

        function handleHomeInput(e) {
            let max = 0;
            if(state.tab === 'games') max = apps.filter(x => x.cat === 'games').length;
            else if(state.tab === 'media') max = apps.filter(x => x.cat === 'media').length;
            else max = apps.filter(x => x.cat === 'web' || x.cat === 'settings').length;

            if (e.key === 'ArrowRight' && state.idx < max - 1) state.idx++;
            if (e.key === 'ArrowLeft' && state.idx > 0) state.idx--;
            
            // Tab Switching
            if (e.key === 'ArrowDown') { /* Ignore */ }
            if (e.key === 'ArrowUp') { /* Ignore */ }
            
            if (e.key === '1' || e.key === 'q') { state.tab = 'games'; state.idx = 0; }
            if (e.key === '2' || e.key === 'w') { state.tab = 'media'; state.idx = 0; }
            if (e.key === '3' || e.key === 'e') { state.tab = 'web'; state.idx = 0; }

            if (e.key === 'Enter') openSelectedApp();
            if (e.key === 'c' || e.key === 'C') openCDMenu();

            renderMenu();
        }

        function openSelectedApp() {
            let currentItems = [];
            if(state.tab === 'games') currentItems = apps.filter(x => x.cat === 'games');
            else if(state.tab === 'media') currentItems = apps.filter(x => x.cat === 'media');
            else currentItems = apps.filter(x => x.cat === 'web' || x.cat === 'settings');
            
            let app = currentItems[state.idx];

            // ƒ∞nternet Kontrol
            if (app.cat !== 'settings' && state.wifi === 'none') {
                showToast("ƒ∞nternet Yok! Ayarlardan Baƒülan.");
                return;
            }
            if (app.cat !== 'settings' && state.wifi === 'bad') {
                showToast("Ev WiFi'si √á√∂p! Baƒülanmƒ±yor...");
                return;
            }

            if (app.locked && state.wifi !== 'hacker') {
                showToast("Bu Oyun Kilitli! CD Tak.");
                return;
            }

            // Launch App
            state.screen = 'app';
            state.activeAppId = app.id;
            
            document.querySelectorAll('.overlay').forEach(o => o.style.display = 'none'); // Hide all

            if (app.id === 'netfiliz') document.getElementById('app-netfiliz').style.display = 'flex';
            if (app.id === 'spoti') {
                document.getElementById('app-spoti').style.display = 'flex';
                spotiIdx = 0; updateSpotiUI();
            }
            if (app.id === 'yutub') {
                document.getElementById('app-yutub').style.display = 'flex';
                yutubLoop();
            }
            if (app.id === 'browser') {
                document.getElementById('app-browser').style.display = 'flex';
                browserIdx = 0; updateBrowserUI();
            }
            if (app.id === 'wifi') {
                state.screen = 'modal'; 
                document.getElementById('menu-wifi').style.display = 'flex';
                wifiIdx = 0; updateWifiUI();
            }
            if (app.id === 'fifa') {
                document.getElementById('game-fifa').style.display = 'flex';
                fifaMenuIdx = 0; updateFifaMenu();
            }
            if (app.id === 'gta') {
                document.getElementById('game-gta').style.display = 'flex';
                startGTA();
            }
            if (app.id === 'store') showToast("Maƒüaza kapalƒ±, kasiyer ka√ßtƒ±.");
        }

        /* --- APP SPECIFIC LOGIC --- */
        
        // CD Menu
        function openCDMenu() {
            state.screen = 'modal';
            state.activeAppId = 'cd';
            document.getElementById('menu-cd').style.display = 'flex';
            document.getElementById('cd-field').focus();
        }

        // SPOTIFAY
        let spotiIdx = 0;
        function updateSpotiUI() {
            document.querySelectorAll('.spoti-item').forEach((el, i) => {
                el.classList.toggle('active', i === spotiIdx);
            });
        }

        // BROWSER
        let browserIdx = 0;
        function updateBrowserUI() {
            let links = document.querySelectorAll('.web-link');
            links.forEach((l, i) => l.classList.toggle('hover', i === browserIdx));
        }

        // WIFI
        let wifiIdx = 0;
        function updateWifiUI() {
            let opts = ['wifi-opt-0', 'wifi-opt-1', 'wifi-opt-2'];
            opts.forEach((id, i) => {
                document.getElementById(id).classList.toggle('active', i === wifiIdx);
            });
        }

        // FIFA MENU
        let fifaMenuIdx = 0;
        function updateFifaMenu() {
            let items = document.querySelectorAll('#fifa-menu .spoti-item');
            items.forEach((el, i) => el.classList.toggle('active', i === fifaMenuIdx));
        }

        // GENERIC APP INPUT
        function handleAppInput(e) {
            if (e.key === 'Escape') {
                closeAllApps();
                return;
            }

            if (state.activeAppId === 'spoti') {
                if (e.key === 'ArrowDown') { spotiIdx = (spotiIdx + 1) % 3; updateSpotiUI(); }
                if (e.key === 'ArrowUp') { spotiIdx = (spotiIdx - 1 + 3) % 3; updateSpotiUI(); }
                if (e.key === 'Enter') {
                    if (spotiIdx === 1) { // Dƒ±≈ükƒ±lama playlist
                        document.body.classList.add('shake-screen');
                        document.getElementById('fart-fx').style.display = 'block';
                        setTimeout(() => {
                            document.body.classList.remove('shake-screen');
                            document.getElementById('fart-fx').style.display = 'none';
                        }, 1000);
                    } else {
                        showToast("M√ºzik √áalƒ±yor...");
                    }
                }
            }

            if (state.activeAppId === 'yutub') {
                if (e.key === 'Enter') {
                    let texts = ["Dolar 50 TL!", "Altƒ±n U√ßu≈üta!", "Borsadan Ka√ßƒ±n!", "Coin Battƒ±!"];
                    document.getElementById('finance-talk').innerText = texts[Math.floor(Math.random()*texts.length)];
                }
            }

            if (state.activeAppId === 'browser') {
                let links = document.querySelectorAll('.web-link');
                if (e.key === 'ArrowDown' && browserIdx < links.length-1) browserIdx++;
                if (e.key === 'ArrowUp' && browserIdx > 0) browserIdx--;
                updateBrowserUI();
                if (e.key === 'Enter') {
                    document.getElementById('browser-url').innerText = "http://" + links[browserIdx].innerText;
                    document.getElementById('browser-content').innerHTML = `<h1>404 NOT FOUND</h1><p>Site sahibi tutuklandƒ±.</p>`;
                }
            }

            if (state.activeAppId === 'fifa') {
                // Game logic is separate, just menu here
                if(document.getElementById('fifa-menu').style.display !== 'none') {
                    if (e.key === 'ArrowDown') fifaMenuIdx = (fifaMenuIdx + 1) % 3;
                    if (e.key === 'ArrowUp') fifaMenuIdx = (fifaMenuIdx - 1 + 3) % 3;
                    updateFifaMenu();
                    if (e.key === 'Enter') {
                        if(fifaMenuIdx === 0) startFifaMatch();
                        if(fifaMenuIdx === 1) {
                            document.getElementById('fifa-menu').style.display = 'none';
                            document.getElementById('icardi-screen').style.display = 'block';
                        }
                        if(fifaMenuIdx === 2) {
                            state.sike = !state.sike;
                            document.getElementById('sike-val').innerText = state.sike ? "A√áIK (HAKEM Bƒ∞Zƒ∞M)" : "KAPALI";
                            document.getElementById('sike-val').style.color = state.sike ? "red" : "white";
                        }
                    }
                }
            }

            if (state.activeAppId === 'gta') {
                if(e.key === 'ArrowLeft') gtaCarX -= 20;
                if(e.key === 'ArrowRight') gtaCarX += 20;
            }
        }

        function handleModalInput(e) {
            if (e.key === 'Escape') {
                closeAllApps();
                return;
            }

            if (state.activeAppId === 'wifi') {
                if(document.getElementById('wifi-pass-input').style.display === 'block') {
                    if(e.key === 'Enter') {
                        let val = document.getElementById('pass-field').value;
                        if(val === 'root') {
                            setWifi('hacker');
                            closeAllApps();
                        } else {
                            showToast("Yanlƒ±≈ü ≈ûifre!");
                        }
                    }
                    return;
                }

                if (e.key === 'ArrowDown') wifiIdx = (wifiIdx + 1) % 3;
                if (e.key === 'ArrowUp') wifiIdx = (wifiIdx - 1 + 3) % 3;
                updateWifiUI();
                if (e.key === 'Enter') {
                    if(wifiIdx === 0) setWifi('bad'); // Ev
                    if(wifiIdx === 1) setWifi('ok'); // Kom≈üu
                    if(wifiIdx === 2) {
                        document.getElementById('wifi-pass-input').style.display = 'block';
                        document.getElementById('pass-field').focus();
                    } else {
                        closeAllApps();
                    }
                }
            }

            if (state.activeAppId === 'cd') {
                if(e.key === 'Enter') {
                    let code = document.getElementById('cd-field').value.toUpperCase();
                    if(code === 'GS1905') { apps[1].locked = false; showToast("FIFA 77 A√ßƒ±ldƒ±!"); }
                    else if(code === 'PARA') { showToast("Para Hesaba Ge√ßti."); }
                    else { showToast("Hatalƒ± CD!"); }
                    closeAllApps();
                }
            }
        }

        function closeAllApps() {
            state.screen = 'home';
            document.querySelectorAll('.overlay').forEach(o => o.style.display = 'none');
            // Reset Game UI
            document.getElementById('fifa-menu').style.display = 'block';
            document.getElementById('fifa-canvas').style.display = 'none';
            document.getElementById('icardi-screen').style.display = 'none';
            stopGTA();
            stopFifa();
            renderMenu();
        }

        /* --- WIFI LOGIC --- */
        function setWifi(type) {
            state.wifi = type;
            let badge = document.getElementById('wifi-status');
            if(type === 'bad') { badge.innerText = "Ev WiFi (K√∂t√º)"; badge.className = "wifi-badge wifi-off"; }
            if(type === 'ok') { badge.innerText = "Kom≈üu (ƒ∞yi)"; badge.className = "wifi-badge wifi-ok"; }
            if(type === 'hacker') { badge.innerText = "HACKER MODE"; badge.className = "wifi-badge wifi-hacker"; }
        }

        /* --- GAMES: GTA LOGIC --- */
        let gtaInterval;
        let gtaCarX = 200;
        let gtaObjs = [];
        let gtaBullets = [];

        function startGTA() {
            let cvs = document.getElementById('gta-canvas');
            let ctx = cvs.getContext('2d');
            gtaObjs = [];
            gtaBullets = [];
            
            gtaInterval = setInterval(() => {
                // Clear
                ctx.fillStyle = "#333"; ctx.fillRect(0,0,400,500);
                
                // Draw Car
                ctx.fillStyle = "blue"; ctx.fillRect(gtaCarX, 400, 40, 60);

                // Spawn Bullets (Random Fire)
                if(Math.random() < 0.1) {
                    gtaBullets.push({x: Math.random() < 0.5 ? 0 : 400, y: Math.random() * 400, dx: Math.random() < 0.5 ? 5 : -5});
                }

                // Draw Bullets
                ctx.fillStyle = "red";
                gtaBullets.forEach((b, i) => {
                    b.x += b.dx; b.y += 2;
                    ctx.beginPath(); ctx.arc(b.x, b.y, 5, 0, Math.PI*2); ctx.fill();
                    // Collision
                    if (Math.abs(b.x - gtaCarX) < 25 && Math.abs(b.y - 400) < 30) {
                        ctx.fillStyle = "white"; ctx.font = "30px Arial"; ctx.fillText("VURULDUN!", 100, 250);
                    }
                });

            }, 50);
        }
        function stopGTA() { clearInterval(gtaInterval); }

        /* --- GAMES: FIFA LOGIC (Low Quality) --- */
        let fifaInterval;
        let ball = {x: 300, y: 200, dx: 4, dy: 4};
        function startFifaMatch() {
            document.getElementById('fifa-menu').style.display = 'none';
            let cvs = document.getElementById('fifa-canvas');
            cvs.style.display = 'block';
            let ctx = cvs.getContext('2d');
            
            fifaInterval = setInterval(() => {
                ctx.fillStyle = "#2e7d32"; ctx.fillRect(0,0,600,400); // Saha
                
                // Top (Kare - Low Quality)
                ctx.fillStyle = "white"; ctx.fillRect(ball.x, ball.y, 20, 20);
                
                ball.x += ball.dx; ball.y += ball.dy;
                
                // Duvarlar
                if(ball.y < 0 || ball.y > 380) ball.dy *= -1;
                
                // Gol
                if(ball.x > 600) {
                    resetBall();
                    showToast(state.sike ? "GOL! (Hakem: Temiz)" : "GOL!");
                }
                if(ball.x < 0) {
                    resetBall();
                    if(state.sike) { showToast("OFSAYT! Gol ƒ∞ptal."); } // ≈ûike
                }

            }, 30);
        }
        function resetBall() { ball.x = 300; ball.y = 200; }
        function stopFifa() { clearInterval(fifaInterval); }

        function showToast(msg) {
            let t = document.getElementById('toast-msg');
            t.innerText = msg; t.style.display = 'block';
            setTimeout(() => t.style.display = 'none', 2000);
        }

        renderMenu();

    </script>
</body>
</html>
